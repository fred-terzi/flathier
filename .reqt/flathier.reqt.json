[
  {
    "reqt_ID": "2025-05-21T03:01:31.868Z-b4dc3408",
    "hier": 0,
    "outline": "0",
    "title": "flathier",
    "details": "Represents the root of the FlatHier project, which provides a flat, ordered, human-readable, and git-friendly hierarchical data structure. Serves as the entry point and main context for all features and utilities in the project.",
    "requirement": "Must provide a robust, extensible, and easy-to-use flat hierarchy data structure for managing requirements, features, and hierarchical data. Must support all core and utility operations (add, delete, move, promote, demote, outline computation, etc.) in a flat JSON format.",
    "acceptance": "- Project root enables all core and utility features to operate on a flat hierarchy.\n- Data structure is human-readable and suitable for git versioning.\n- All operations (add, delete, move, etc.) are supported and tested.\n- Project documentation and requirements are managed through this root context.",
    "readme": "FlatHier is a technical foundation for managing hierarchical data in a flat, ordered JSON format. It is engineered for maximum clarity, version control, and automation in requirements and project data management. FlatHier enables all hierarchical operations—such as add, delete, move, promote, demote, and outline computation—while maintaining a single, human-readable ordered structure.\n\n ### Demo Video\n\n ![FlatHier Demo](demo/output.gif)\n\nTechnical Highlights:\n- Flat, ordered JSON structure for efficient diffing and git integration\n- Deterministic outline and hierarchy computation for robust data integrity\n- Designed for seamless automation and programmatic manipulation\n- Enables granular tracking and editing of requirements, features, and project metadata\n- Optimized for both manual and automated workflows in modern development environments\n\nUse FlatHier to ensure your project's hierarchical data remains consistent, auditable, and ready for both human and machine consumption.",
    "status": "Done",
    "readme_ai": "include",
    "test_exists": "true",
    "test_passed": "true"
  },
  {
    "reqt_ID": "2025-05-21T03:44:27.601Z-431b1bdb",
    "hier": 0,
    "outline": "1",
    "title": "Installation",
    "details": "FlatHier is distributed as an npm package. Users can install it locally for project use or globally for CLI access. The package includes all core and utility modules, and no post-install configuration is required. Installation steps and troubleshooting tips are provided in the project README. Installation is validated through automated and manual tests on supported platforms.",
    "requirement": "Must provide a simple, reliable installation process for the FlatHier library via npm, supporting both local and global installation. Installation must make all core features available and ready to use with minimal setup.",
    "acceptance": "- Users can install FlatHier using `npm install flathier` or `npm install -g flathier`.\n- After installation, users can import and use FlatHier in their projects without additional configuration.\n- All core modules are accessible after installation.\n- Installation instructions are documented in the README.\n- Installation is tested and verified on at least Linux and one other major OS.",
    "readme": "To install FlatHier, run:\n\n```bash\nnpm install flathier\n```\n\nOr for global CLI usage:\n\n```bash\nnpm install -g flathier\n```\n\nAfter installation, you can import FlatHier modules in your project or use the CLI if installed globally. See the README for more details and usage examples.",
    "status": "Done",
    "readme_ai": "include",
    "test_exists": "true",
    "test_passed": "true"
  },
  {
    "reqt_ID": "2025-05-21T03:44:41.504Z-992bdab5",
    "hier": 0,
    "outline": "2",
    "title": "Core Functions",
    "details": "The core functions of FlatHier are implemented as modular JavaScript files in the `src/core/` directory. Each function is responsible for a specific operation on the flat hierarchy data structure, such as inserting, deleting, moving, promoting, or demoting items, as well as rendering the hierarchy as an ASCII-art tree. All core functions are covered by automated tests in the `tests/` directory, and their status is tracked in this requirements document. The successful implementation and testing of these modules ensure the reliability and usability of the FlatHier library.",
    "requirement": "Must provide all essential core functions for managing a flat hierarchy, including adding, deleting, moving, promoting, demoting, and visualizing items. Each function must operate on a flat JSON structure, maintain data integrity, and support robust error handling.",
    "acceptance": "- All core function modules (addObject, asciiTree, deleteObject, demote, moveDown, moveUp, promote) are implemented, tested, and documented.\n- Each function passes its respective tests and meets its requirement and acceptance criteria.\n- Functions handle edge cases and invalid input gracefully.\n- Core functions are accessible after installation and can be used programmatically.\n- Documentation describes usage and expected behavior for each function.",
    "readme": "FlatHier's core functions provide all the essential operations needed to manage a flat, ordered hierarchy of items. These include adding, deleting, moving, promoting, demoting, and visualizing items. Each function is modular, well-documented, and thoroughly tested, ensuring robust and predictable behavior for all hierarchy management tasks.",
    "status": "Done",
    "readme_ai": "exclude",
    "test_exists": "true",
    "test_passed": "true"
  },
  {
    "reqt_ID": "2025-05-21T03:14:24.688Z-246c2b85",
    "hier": 1,
    "outline": "2.1",
    "title": "addObject(): Insert new object after outline number",
    "details": "Implements insertion of a new object into a flat hierarchical array after a specified outline number. Inherits hierarchy, assigns a unique ID to any _ID field, and recomputes outlines for all items. Handles errors gracefully if the outline number is invalid.",
    "requirement": "Must insert a new object after a given outline number, assign a unique ID to any field ending with _ID, and recompute outline numbers for all items. Must not modify data if the outline number is invalid.",
    "acceptance": "- New object appears immediately after the specified outline number.\n- New object has a unique ID in the correct field.\n- Outline numbers are correct and consistent after insertion.\n- No changes are made if the outline number is invalid, and an error is logged.",
    "readme": "The addObject.js module provides a function to insert a new item into a flat hierarchical data array, assign a unique ID, and update outlines. It ensures data integrity and proper error handling.\n\n**Example Usage:**\n\n```js\nimport flathier from 'flathier';\n\nconst data = [\n  { outline: '0', title: 'Root', hier: 0 },\n  { outline: '1', title: 'First Item', hier: 1 },\n  { outline: '1.1', title: 'Child', hier: 1 },\n  { outline: '2', title: 'Sibling', hier: 0 },\n  { outline: '2.1', title: 'Another Child', hier: 1 }\n  // ... more items\n];\n\nconst newItem = { title: 'New Sibling'};\n\n(async () => {\n  const updated = await flathier.addObject(data, '1', newItem);\n  // updated now contains the new item after outline '1', with a unique reqt_ID and correct outlines\n})();\n```\n\n- Note: `addObject` is accessed as a property of the main `flathier` package export. It is asynchronous and returns a Promise.\n- If not already present `hier`, `outline`, or `reqt_ID` fields, they will be added to the new item.",
    "status": "Done",
    "readme_ai": "include",
    "test_exists": "true",
    "test_passed": "true"
  },
  {
    "reqt_ID": "2025-05-21T03:14:24.853Z-15c924e7",
    "hier": 1,
    "outline": "2.2",
    "title": "asciiTree(): Render flat hierarchy as ASCII-art tree",
    "details": "Implements a function to render a flat list of items (with outline and title) as an ASCII-art tree. Handles sorting, parent-child relationships, and proper connector symbols. Treats the first top-level item as the main root and supports custom fields for display.",
    "requirement": "Must generate an ASCII-art tree from a flat array of items, showing hierarchy and including specified fields. Must handle multiple top-level nodes by treating the first as the main root.",
    "acceptance": "- Output is a visually correct ASCII-art tree.\n- All items are included in the correct hierarchical position.\n- Custom fields are displayed as specified.\n- Handles multiple top-level nodes by attaching them to the first root.",
    "readme": "The `asciiTree()` function visualizes a flat hierarchy as an ASCII-art tree, making it easy to inspect structure and relationships. It takes an array of items (each with at least 'outline' and 'title' fields) and an array of additional fields to include in the output. The function sorts items, builds parent-child relationships, and treats the first top-level item as the main root, attaching any additional top-level nodes as children. The output is an array of strings, each representing a row of the ASCII tree, with proper connectors and indentation.\n\n**Example Usage:**\n\n```js\nimport flathier from 'flathier';\n\nconst items = [\n  { outline: '1', title: 'Root' },\n  { outline: '1.1', title: 'Child A' },\n  { outline: '1.2', title: 'Child B' },\n  { outline: '2', title: 'Another Root' }\n];\n\nconst treeRows = await flathier.asciiTree(items, ['title']);\ntreeRows.forEach(row => process.stdout.write(row));\n// Output:\n// └── 1: Root\n//     ├── 1.1: Child A\n//     └── 1.2: Child B\n//     └── 2: Another Root\n```\n\n- Note: The function is asynchronous and returns an array of strings (one per row, each ending with a newline character).\n- You can specify which fields to include in each node's label by passing an array of field names as the second argument.\n- Multiple top-level nodes are attached to the first as children for a single-rooted display.",
    "status": "Done",
    "readme_ai": "include",
    "test_exists": "true",
    "test_passed": "true"
  },
  {
    "reqt_ID": "2025-05-21T03:14:25.030Z-8beb2478",
    "hier": 1,
    "outline": "2.3",
    "title": "deleteObject(): Delete item by outline and update hierarchy",
    "details": "Implements deletion of an item from a flat hierarchical array by outline number. Updates the data array and recomputes outlines for the remaining items. Handles errors gracefully if the outline number is invalid.",
    "requirement": "Must delete an item by outline number and recompute outlines for all remaining items. Must not modify data if the outline number is invalid.",
    "acceptance": "- Item is removed from the array.\n- Outline numbers are correct and consistent after deletion.\n- No changes are made if the outline number is invalid, and an error is logged.",
    "readme": "The `deleteObject()` function removes an item from a flat hierarchical data array by outline number and updates outlines for the remaining items, ensuring data integrity. If the outline number is invalid, no changes are made and an error is logged.\n\n**Example Usage:**\n\n```js\nimport flathier from 'flathier';\n\nconst data = [\n  { outline: '0', title: 'Root', hier: 0 },\n  { outline: '1', title: 'First Item', hier: 1 },\n  { outline: '1.1', title: 'Child', hier: 1 },\n  { outline: '2', title: 'Sibling', hier: 0 }\n];\n\nconst updated = flathier.deleteObject(data, '1.1');\n// updated now contains the array with the item '1.1' removed and outlines recomputed\n```\n\n- Note: `deleteObject` is synchronous and returns the updated array, or the original array if the outline number is invalid.",
    "status": "Done",
    "readme_ai": "include",
    "test_exists": "true",
    "test_passed": "true"
  },
  {
    "reqt_ID": "2025-05-21T03:14:25.234Z-10e47560",
    "hier": 1,
    "outline": "2.4",
    "title": "demote(): Demote node and subtree one level",
    "details": "Implements demotion of a node (and its subtree) one level deeper in the hierarchy, making it the last child of its immediate previous sibling. Uses buildTree and flattenTree utilities to update the structure.",
    "requirement": "Must demote a node and its subtree one level, updating the hierarchy and outlines. Must not demote the first item or if selection is invalid.",
    "acceptance": "- Node and its subtree become the last child of the previous sibling.\n- Hierarchy and outlines are updated correctly.\n- No changes are made if the selection is invalid or the first item is selected.",
    "readme": "The `demote()` function demotes a node (and its subtree) one level deeper in the hierarchy, making it the last child of its immediate previous sibling. It returns a new array with updated hierarchy and outlines. If the selection is invalid or the first item is selected, the original array is returned unchanged.\n\n**Example Usage:**\n\n```js\nimport flathier from 'flathier';\n\nconst data = [\n  { outline: '1', title: 'Root' },\n  { outline: '1.1', title: 'Child A' },\n  { outline: '1.2', title: 'Child B' }\n];\n\nconst updated = flathier.demote(data, '1.2');\n// '1.2' is now a child of '1.1', outlines and hierarchy are updated\n```\n\n- Note: `demote` is synchronous and returns the updated array, or the original array if the operation is invalid.",
    "status": "Done",
    "readme_ai": "include",
    "test_exists": "true",
    "test_passed": "true"
  },
  {
    "reqt_ID": "2025-05-21T03:14:25.390Z-9307aa56",
    "hier": 1,
    "outline": "2.5",
    "title": "moveDown(): Move node and subtree down among siblings",
    "details": "Implements moving a node (and its subtree) down one position among its siblings in the hierarchy. Updates the order and recomputes outlines. Handles edge cases where the node is already last or selection is invalid.",
    "requirement": "Must move a node and its subtree down among siblings, updating the order and outlines. Must not modify data if the node is already last or selection is invalid.",
    "acceptance": "- Node and its subtree are moved down one position.\n- Hierarchy and outlines are updated correctly.\n- No changes are made if the node is already last or selection is invalid.",
    "readme": "The `moveDown()` function moves a node (and its subtree) down one position among its siblings in the hierarchy, updating the order and outlines. If the node is already last or the selection is invalid, the original array is returned unchanged.\n\n**Example Usage:**\n\n```js\nimport flathier from 'flathier';\n\nconst data = [\n  { outline: '1', title: 'Root' },\n  { outline: '1.1', title: 'Child A' },\n  { outline: '1.2', title: 'Child B' }\n];\n\nconst updated = flathier.moveDown(data, '1.1');\n// '1.1' and its subtree are now after '1.2', outlines are updated\n```\n\n- Note: `moveDown` is synchronous and returns the updated array, or the original array if the operation is invalid.",
    "status": "Done",
    "readme_ai": "include",
    "test_exists": "true",
    "test_passed": "true"
  },
  {
    "reqt_ID": "2025-05-21T03:14:25.588Z-4d92511c",
    "hier": 1,
    "outline": "2.6",
    "title": "moveUp(): Move node and subtree up among siblings",
    "details": "Implements moving a node (and its subtree) up one position among its siblings in the hierarchy. Updates the order and recomputes outlines. Handles edge cases where the node is already first or selection is invalid.",
    "requirement": "Must move a node and its subtree up among siblings, updating the order and outlines. Must not modify data if the node is already first or selection is invalid.",
    "acceptance": "- Node and its subtree are moved up one position.\n- Hierarchy and outlines are updated correctly.\n- No changes are made if the node is already first or selection is invalid.",
    "readme": "The `moveUp()` function moves a node (and its subtree) up one position among its siblings in the hierarchy, updating the order and outlines. If the node is already first or the selection is invalid, the original array is returned unchanged.\n\n**Example Usage:**\n\n```js\nimport flathier from 'flathier';\n\nconst data = [\n  { outline: '1', title: 'Root' },\n  { outline: '1.1', title: 'Child A' },\n  { outline: '1.2', title: 'Child B' }\n];\n\nconst updated = flathier.moveUp(data, '1.2');\n// '1.2' and its subtree are now before '1.1', outlines are updated\n```\n\n- Note: `moveUp` is synchronous and returns the updated array, or the original array if the operation is invalid.",
    "status": "Done",
    "readme_ai": "include",
    "test_exists": "true",
    "test_passed": "true"
  },
  {
    "reqt_ID": "2025-05-21T03:14:25.726Z-52e313cd",
    "hier": 1,
    "outline": "2.7",
    "title": "promote(): Promote node and subtree one level up",
    "details": "Implements promotion of a node (and its subtree) one level up in the hierarchy, making it a sibling of its parent. Uses buildTree and flattenTree utilities to update the structure.",
    "requirement": "Must promote a node and its subtree one level up, updating the hierarchy and outlines. Must not promote if already top-level or selection is invalid.",
    "acceptance": "- Node and its subtree become a sibling of their parent.\n- Hierarchy and outlines are updated correctly.\n- No changes are made if the selection is invalid or already top-level.",
    "readme": "The `promote()` function promotes a node (and its subtree) one level up in the hierarchy, making it a sibling of its parent. It returns a new array with updated hierarchy and outlines. If the selection is invalid or the node is already top-level, the original array is returned unchanged.\n\n**Example Usage:**\n\n```js\nimport flathier from 'flathier';\n\nconst data = [\n  { outline: '1', title: 'Root' },\n  { outline: '1.1', title: 'Child A' },\n  { outline: '1.1.1', title: 'Grandchild' }\n];\n\nconst updated = flathier.promote(data, '1.1.1');\n// '1.1.1' is now a sibling of '1.1', outlines and hierarchy are updated\n```\n\n- Note: `promote` is synchronous and returns the updated array, or the original array if the operation is invalid.",
    "status": "Done",
    "readme_ai": "include",
    "test_exists": "true",
    "test_passed": "true"
  },
  {
    "reqt_ID": "2025-05-21T03:44:55.158Z-3fc53c59",
    "hier": 0,
    "outline": "3",
    "title": "Utilities",
    "details": "DETAILS",
    "requirement": "REQUIREMENT",
    "acceptance": "ACCEPTANCE",
    "readme": "FlatHier provides a set of utility functions to support core hierarchy operations. These utilities enable advanced manipulation, transformation, and validation of flat and nested hierarchical data. They are designed for internal use by core functions, but can also be used directly for custom workflows and integrations.\n\n**Included Utilities:**\n- `buildTree()`: Converts a flat array with outline/hier fields into a nested tree structure.\n- `computeOutlines()`: Recomputes outline numbers for all items in a flat hierarchy after changes.\n- `editTitle()`: Updates the title of an item by outline number.\n- `flattenTree()`: Flattens a nested tree structure back into a flat array with correct outline/hier fields.\n- `generateUniqueId()`: Generates unique, timestamp-based IDs for use in item fields (e.g., *_ID).\n\n**Usage Example:**\n\n```js\nimport flathier from 'flathier';\n\nconst flat = [\n  { outline: '1', title: 'Root', hier: 0 },\n  { outline: '1.1', title: 'Child', hier: 1 }\n];\n\nconst tree = flathier.buildTree(flat);\nconst flatAgain = flathier.flattenTree(tree);\nconst updated = flathier.editTitle(flatAgain, '1.1', 'New Title');\nconst outlines = flathier.computeOutlines(updated);\nconst id = flathier.generateUniqueId();\n```\n\n- These utilities are synchronous unless otherwise noted.\n- They are accessible as properties of the main `flathier` package export.\n- See individual function documentation for details and advanced usage.",
    "status": "NEW",
    "readme_ai": "exclude",
    "test_exists": "false",
    "test_passed": "false"
  },
  {
    "reqt_ID": "2025-05-21T03:14:25.873Z-2f157233",
    "hier": 1,
    "outline": "3.1",
    "title": "buildTree(): Build nested tree from flat array",
    "details": "Implements a utility to convert a flat array of items (with outline and hier fields) into a nested tree structure. Used for hierarchical operations and visualization.",
    "requirement": "Must build a nested tree structure from a flat array, preserving parent-child relationships based on outline and hier fields.",
    "acceptance": "- Output is a correct nested tree structure.\n- All parent-child relationships are preserved.\n- Handles edge cases such as missing parents or multiple roots.",
    "readme": "The buildTree.js utility provides a function to convert a flat hierarchy into a nested tree, enabling hierarchical operations and visualizations.",
    "status": "Done",
    "readme_ai": "include",
    "test_exists": "true",
    "test_passed": "true"
  },
  {
    "reqt_ID": "2025-05-21T03:14:26.036Z-3165bb30",
    "hier": 1,
    "outline": "3.2",
    "title": "computeOutlines(): Recompute outline numbers for all items",
    "details": "Implements a utility to recalculate outline numbers for all items in a flat hierarchy after structural changes (insert, delete, move, etc.). Ensures outline consistency.",
    "requirement": "Must recompute outline numbers for all items in the array, reflecting the current hierarchy and order.",
    "acceptance": "- All items have correct and consistent outline numbers after changes.\n- Handles edge cases such as empty arrays or deeply nested structures.",
    "readme": "The computeOutlines.js utility ensures that all items in a flat hierarchy have correct outline numbers after any structural modification.",
    "status": "Done",
    "readme_ai": "include",
    "test_exists": "true",
    "test_passed": "true"
  },
  {
    "reqt_ID": "2025-05-21T03:14:26.191Z-184d74d5",
    "hier": 1,
    "outline": "3.3",
    "title": "editTitle(): Edit the title of an item by outline",
    "details": "Implements a utility to update the title field of an item in a flat hierarchy, identified by its outline number.",
    "requirement": "Must update the title of the specified item by outline number, leaving other fields unchanged.",
    "acceptance": "- Only the title field is updated for the specified item.\n- No changes are made if the outline number is invalid.",
    "readme": "The editTitle.js utility provides a function to update the title of an item in a flat hierarchy by outline number.",
    "status": "Done",
    "readme_ai": "include",
    "test_exists": "true",
    "test_passed": "true"
  },
  {
    "reqt_ID": "2025-05-21T03:14:26.345Z-ace32d0d",
    "hier": 1,
    "outline": "3.4",
    "title": "flattenTree(): Flatten nested tree to flat array",
    "details": "Implements a utility to convert a nested tree structure back into a flat array, assigning correct outline and hier fields.",
    "requirement": "Must flatten a nested tree into a flat array, preserving outline and hier information for each item.",
    "acceptance": "- Output is a flat array with correct outline and hier fields.\n- All items from the tree are included.\n- Handles edge cases such as empty trees or single-node trees.",
    "readme": "The flattenTree.js utility provides a function to flatten a nested tree structure into a flat array for storage or further processing.",
    "status": "Done",
    "readme_ai": "include",
    "test_exists": "true",
    "test_passed": "true"
  },
  {
    "reqt_ID": "2025-05-21T03:14:26.495Z-c5078ce8",
    "hier": 1,
    "outline": "3.5",
    "title": "generateUniqueId(): Generate unique IDs for items",
    "details": "Implements a utility to generate unique IDs for items, typically used for fields ending with _ID. Ensures uniqueness and timestamp-based IDs.",
    "requirement": "Must generate a unique, timestamp-based ID string for use in item fields.",
    "acceptance": "- Generated IDs are unique and include a timestamp.\n- Can be used for any field ending with _ID.",
    "readme": "The generateUniqueId.js utility provides a function to generate unique, timestamp-based IDs for use in hierarchical data structures.",
    "status": "Done",
    "readme_ai": "include",
    "test_exists": "true",
    "test_passed": "true"
  }
]